<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Prueba</title>
</head>
<body>
<form class="user">
    <div class="form-group row">
        <div class="col-sm-6 mb-3 mb-sm-0">
            <input type="text" class="form-control form-control-user" id="txtNombre"
                   placeholder="Nombre">
        </div>
        <div class="col-sm-6">
            <input type="text" class="form-control form-control-user" id="txtApellido"
                   placeholder="Apellido">
        </div>
    </div>
    <div class="form-group">
        <input type="email" class="form-control form-control-user" id="txtEmail"
               placeholder="Email">
    </div>
    <div class="form-group row">
        <div class="col-sm-6 mb-3 mb-sm-0">
            <input type="password" class="form-control form-control-user"
                   id="txtPassword" placeholder="Password">
        </div>
        <div class="col-sm-6">
            <input type="password" class="form-control form-control-user"
                   id="txtRepeatPassword" placeholder="Repeat Password">
        </div>
    </div>
    <button onclick="registrarInstructor()">Añadir</button>
</form>
<form>
    <input type="number" id="id">
    <button onclick="eliminarUsuario()">Al Gulag</button>
    <button onclick="eliminarInstructor()">Pal Lobby</button>
    <button onclick="registrarSocio()">Te añado sosio</button>
</form>
<script type="text/javascript">
    let contador = 5;
    function getHeaders(){
        return {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        };
    }
    async function eliminarUsuario(){
        const id = document.getElementById('id').value;
        if(!confirm("Desea eliminar este usuario?")){
            return;
        }
        const request = await fetch('http://localhost:8080/api/usuarios/'+id, {
            method: 'DELETE',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            }
        });
        location.reload();
    }
    async function eliminarInstructor(){
        const id = document.getElementById('id').value;
        if(!confirm("Desea eliminar este usuario?")){
            return;
        }
        const request = await fetch('http://localhost:8080/api/instructor/'+id, {
            method: 'DELETE',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            }
        });
        location.reload();
    }
    async function registrarInstructor(){
        let datos={}
        datos.nombreInstructor = "David";
        datos.tipoActividad = {
            id: 1,
            nombreActividad: "Pesitas",
            descripcion: "Pa ponernos mas fuertes que el vinagre",
        };

        await fetch('api/registraInstructor', {
            method: 'POST',
            headers: getHeaders(),
            body: JSON.stringify(datos)
        });
    }
    async function registrarSocio(){
        let datos={}
        datos.nombre = "Alvarito";
        datos.email = "alvarito845@minabo.com";
        datos.apellidos = "845";
        datos.telefono = "6464646464";
        datos.clave = "loscuernosdetumadre";

        await fetch('api/registraSocio', {
            method: 'POST',
            headers: getHeaders(),
            body: JSON.stringify(datos)
        }).catch(error => console.error(error));
    }
</script>
</body>
</html>